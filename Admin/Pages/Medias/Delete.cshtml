@page "{mediaid}"
@model Admin.Pages.Medias.DeleteModel

@{
    ViewData["Title"] = "Delete";
}

<h1>Delete</h1>

<form method="post" class="mb-3 bg-danger bg-opacity-50">
    <div class="row text-center">
        <h2>Are you sure you want to delete this?</h2>
    </div>
    <div class="d-flex justify-content-center p-3">
        <span class="me-3">
            <input class="btn btn-danger" type="submit" value="Yes" />
        </span>
        <span class="ms-3">
            <a asp-page="Index" class="btn btn-primary">No</a>
        </span>
    </div>
</form>
<div class="row">
    <div class="col">
        <div class="card text-center">
            <div class="card-header">
                <ul class="nav nav-pills card-header-pills">
                    @foreach (var item in Model.ActiveLanguages)
                    {
                        var strItem = Model.LanguageIdToCode(item);
                        <li class="nav-item">
                            <a id='@($"lang_nav_{strItem}")' class="nav-link" aria-current="true" href="#">@strItem</a>
                        </li>
                    }
                </ul>
            </div>
            <input hidden asp-for="@Model.Media.MediaTypeId" />
            @for (var i = 0; i < Model.Media.MediaTranslations.Count; i++)
            {
                <div id='@($"lang_body_{ Model.LanguageIdToCode(Model.Media.MediaTranslations[i].LanguageId)}")' class="card-body">
                    <label asp-for="@Model.Media.MediaTranslations[i].Title" class="control-label"></label>
                    <span asp-for="@Model.Media.MediaTranslations[i].Title" class="form-control">@Model.Media.MediaTranslations[i].Title</span>

                    <label asp-for="@Model.Media.MediaTranslations[i].Description" class="control-label"></label>
                    <span class="form-control">@Model.Media.MediaTranslations[i].Description</span>

                    <label asp-for="@Model.Media.MediaTranslations[i].Url" class="control-label d-block"></label>
                    <img class="img-thumbnail img-fluid" asp-for="@Model.Media.MediaTranslations[i].Url" src="\images\@Model.Media.MediaTranslations[i].Url" alt="@Model.Media.MediaTranslations[i].Url" />
                </div>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script type="text/javascript">
        let values = @(Json.Serialize(Model.ActiveLanguages.Select(Model.LanguageIdToCode)));
        function clearall()
        {
            for(var item of values)
            {
                $(`#lang_nav_${item}`).removeClass("active");
                $(`#lang_body_${item}`).attr("hidden", "");
            }
        };

        function getactivetab() {
            for(var item of values)
            {
                if($(`#lang_nav_${item}`).hasClass("active"))
                    return item;
            }
        };

        $(document).ready(function () {
            clearall();
            $('@($"#lang_nav_{Model.LanguageIdToCode(Model.ActiveLanguages.First())}")').addClass("active");
            $('@($"#lang_body_{Model.LanguageIdToCode(Model.ActiveLanguages.First())}")').removeAttr("hidden");
            @foreach (var item in Model.ActiveLanguages.Select(Model.LanguageIdToCode))
            {
                @:$('@($"#lang_nav_{item}")').on("click", function()
                @:{
                    @:clearall();
                    @:$('@($"#lang_nav_{item}")').addClass("active");
                    @:$('@($"#lang_body_{item}")').removeAttr("hidden");
                @:});
            }
        });
    </script>
}
